<header>
    <div class="container-fluid nav-bar">
        <div class="container">
            <nav class="navbar navbar-light navbar-expand-lg py-4">
                <a asp-controller="Home" asp-action="Index" class="navbar-brand">
                    <h1 class="text-primary fw-bold mb-0">The Diner's<span class="text-dark">Club</span></h1>
                </a>

                <!-- Mobile toggle -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars text-primary"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <!-- Nav links -->
                    <div class="navbar-nav mx-auto">
                        <a asp-controller="Home" asp-action="Index" class="nav-item nav-link active"> @SharedLocalizer["Home"]</a>
                        <a asp-controller="Home" asp-action="About" class="nav-item nav-link">@SharedLocalizer["About"]</a>
                        <a asp-controller="Home" asp-action="Service" class="nav-item nav-link">@SharedLocalizer["Services"]</a>
                        <a asp-controller="Home" asp-action="Events" class="nav-item nav-link">@SharedLocalizer["Events"]</a>
                        <a asp-controller="Home" asp-action="Menu" class="nav-item nav-link">@SharedLocalizer["Menu"]</a>
                        <a asp-controller="Review" asp-action="Index" class="nav-item nav-link"> @SharedLocalizer["Feedback"]</a>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">@SharedLocalizer["Pages"]</a>
                            <div class="dropdown-menu bg-light">

                                <a asp-controller="Booking" asp-action="GetAll" class="dropdown-item"> @SharedLocalizer["BookNow"]</a>
                                @* <a asp-controller="Home" asp-action="Testimonial" class="dropdown-item">Testimonial</a> *@
                                <a asp-controller="Home" asp-action="Team" class="dropdown-item">@SharedLocalizer["team"]</a>
                                @if (User.IsInRole("Customer"))
                                {
                                    <a asp-controller="CustomerChat" asp-action="Index" class="dropdown-item">
                                        Chat with Delivery
                                    </a>
                                }
                                else if (User.IsInRole("Delivery"))
                                {
                                    <a asp-controller="DeliveryChat" asp-action="Index" class="dropdown-item">
                                        Chat with Customers
                                    </a>
                                }
                                <a asp-controller="CustomerChat" asp-action="Chat" >Chat with delivery</a>
                            </div>
                        </div>
                        <a asp-controller="Home" asp-action="Contact" class="nav-item nav-link">@SharedLocalizer["Contact"]</a>
                    </div>

                    <!-- Buttons (collapse into mobile menu) -->
                    <div class="header-buttons-container">
                        <!-- Search toggle button -->
                        <div class="search-container">
                            <button id="searchToggleBtn" class="btn btn-outline-secondary">
                                <i class="fas fa-search"></i>
                            </button>

                            <!-- Search Panel -->
                            <div class="search-panel" id="searchPanel">
                                <div class="search-content">
                                    <div class="search-input-group">
                                        <input type="text" id="searchInput" class="form-control" placeholder="Search...">
                                        
                                    </div>
                                    <select id="sortSelect" class="form-select mt-2">
                                        <option value="name">Sort by Name</option>
                                        <option value="min">Price: Low to High</option>
                                        <option value="max">Price: High to Low</option>
                                    </select>
                                    <div class="search-results mt-3" id="searchResults"></div>
                                </div>
                            </div>
                        </div>



                        <!-- Auth buttons -->
                        <div class="auth-buttons">
                            @if (!User.Identity.IsAuthenticated)
                            {
                                <a asp-controller="Account" asp-action="Login" class="btn btn-outline-primary">@SharedLocalizer["Login"]</a>
                            }
                            else
                            {
                                <a asp-controller="Profile" asp-action="Index" class="btn btn-outline-secondary">
                                    <i class="fas fa-user"></i> @SharedLocalizer["Profile"]
                                </a>
                                <form asp-controller="Account" asp-action="Logout" method="post">
                                    <button type="submit" class="btn btn-logout">@SharedLocalizer["Logout"]</button>
                                </form>
                            }
                        </div>

                        <!-- Extra buttons -->
                        <div class="extra-buttons">
                            <a asp-controller="Cart" asp-action="Index" class="btn btn-outline-secondary">
                                <i class="fas fa-shopping-cart"></i>  @SharedLocalizer["Cart"]
                                <span class="badge bg-primary ms-1" id="cartCount">0</span>
                            </a>
                            <a asp-controller="Booking" asp-action="Create" class="btn btn-primary">@SharedLocalizer["BookNow"]</a>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</header>
